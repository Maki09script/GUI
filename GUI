-- SERVICES
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- CONFIGURATION
local BACKGROUND_COLOR = Color3.fromRGB(0, 0, 0)
local ACCENT_COLOR = Color3.fromRGB(255, 255, 255)
local TITLE_TEXT = "Gawang Maki V2"
local FONT = Enum.Font.SourceSansBold

-- MENU ITEMS
local MENU_ITEMS = {
    "Cavite Roleplay",
    "Urban Roleplay",
    "The Billionaire City",
    "Los Santos City RP",
    "Lucio City RP",
    "La Urban RP",
    "Maharlika RP",
    "Silangan Metro City", -- ✅ ADDED
    "OTHERS",
}

-- CREATE UI
local function createScriptHubUI()
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "ScriptHubUI"
    ScreenGui.Parent = PlayerGui
    ScreenGui.ResetOnSpawn = false

    -- MAIN FRAME
    local MainFrame = Instance.new("Frame")
    MainFrame.Size = UDim2.new(0.5, 0, 0.5, 0)
    MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
    MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    MainFrame.BackgroundColor3 = BACKGROUND_COLOR
    MainFrame.BorderSizePixel = 0
    MainFrame.Parent = ScreenGui

    Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0, 8)

    -- TITLE BAR
    local TitleBar = Instance.new("TextLabel")
    TitleBar.Size = UDim2.new(1, 0, 0.1, 0)
    TitleBar.BackgroundColor3 = BACKGROUND_COLOR
    TitleBar.BorderSizePixel = 0
    TitleBar.Font = FONT
    TitleBar.Text = TITLE_TEXT
    TitleBar.TextColor3 = ACCENT_COLOR
    TitleBar.TextSize = 20
    TitleBar.TextXAlignment = Enum.TextXAlignment.Left
    TitleBar.Parent = MainFrame

    local TitlePadding = Instance.new("UIPadding", TitleBar)
    TitlePadding.PaddingLeft = UDim.new(0, 10)

    -- CENTER PANEL
    local CenterPanel = Instance.new("Frame")
    CenterPanel.Size = UDim2.new(0.9, 0, 0.85, 0)
    CenterPanel.Position = UDim2.new(0.5, 0, 0.55, 0)
    CenterPanel.AnchorPoint = Vector2.new(0.5, 0.5)
    CenterPanel.BackgroundTransparency = 1
    CenterPanel.Parent = MainFrame

    -- LEFT PANEL
    local LeftPanel = Instance.new("ScrollingFrame")
    LeftPanel.Size = UDim2.new(0.45, 0, 1, 0)
    LeftPanel.ScrollBarThickness = 6
    LeftPanel.BackgroundColor3 = BACKGROUND_COLOR
    LeftPanel.BorderSizePixel = 0
    LeftPanel.Parent = CenterPanel

    Instance.new("UIListLayout", LeftPanel).Padding = UDim.new(0, 15)
    Instance.new("UIPadding", LeftPanel).PaddingTop = UDim.new(0, 10)

    -- RIGHT PANEL
    local RightPanel = Instance.new("ScrollingFrame")
    RightPanel.Size = UDim2.new(0.45, 0, 1, 0)
    RightPanel.Position = UDim2.new(0.55, 0)
    RightPanel.ScrollBarThickness = 6
    RightPanel.BackgroundColor3 = BACKGROUND_COLOR
    RightPanel.BorderSizePixel = 0
    RightPanel.Parent = CenterPanel

    Instance.new("UIListLayout", RightPanel).Padding = UDim.new(0, 15)

    -- PLACEHOLDER
    local PlaceholderLabel = Instance.new("TextLabel")
    PlaceholderLabel.Size = UDim2.new(1, -20, 0, 60)
    PlaceholderLabel.Position = UDim2.new(0, 10, 0, 50)
    PlaceholderLabel.BackgroundTransparency = 1
    PlaceholderLabel.Font = FONT
    PlaceholderLabel.TextColor3 = ACCENT_COLOR
    PlaceholderLabel.TextSize = 16
    PlaceholderLabel.TextWrapped = true
    PlaceholderLabel.Text = "SELECT A CITY\nPRESS M TO TOGGLE\nMAKI ON TOP"
    PlaceholderLabel.Parent = RightPanel

    -- BUTTON FUNCTION
    local function CreateButton(name, callback)
        local btn = Instance.new("TextButton")
        btn.Size = UDim2.new(1, -20, 0, 30)
        btn.BackgroundColor3 = BACKGROUND_COLOR
        btn.BorderSizePixel = 0
        btn.Font = FONT
        btn.Text = name
        btn.TextColor3 = ACCENT_COLOR
        btn.TextSize = 16
        btn.Parent = RightPanel
        btn.MouseButton1Click:Connect(callback)
    end

    -- LEFT MENU
    for _, itemText in ipairs(MENU_ITEMS) do
        local MenuItem = Instance.new("TextButton")
        MenuItem.Size = UDim2.new(1, -20, 0, 30)
        MenuItem.BackgroundColor3 = BACKGROUND_COLOR
        MenuItem.BorderSizePixel = 0
        MenuItem.Font = FONT
        MenuItem.Text = itemText
        MenuItem.TextColor3 = ACCENT_COLOR
        MenuItem.TextSize = 16
        MenuItem.Parent = LeftPanel

        MenuItem.MouseButton1Click:Connect(function()
            for _, child in ipairs(RightPanel:GetChildren()) do
                if child:IsA("TextButton") then child:Destroy() end
            end
            PlaceholderLabel.Visible = false

            -- SILANGAN METRO CITY ✅
            if itemText == "Silangan Metro City" then
                CreateButton("Pistol", function()
                    ReplicatedStorage.UwUCafeFolder.BuyTool:FireServer(
                        "Pistol", 0, "RACCMETHOD"
                    )
                end)

                CreateButton("Silenced Pistol", function()
                    ReplicatedStorage.UwUCafeFolder.BuyTool:FireServer(
                        "Silenced Pistol", 0, "RACCMETHOD"
                    )
                end)

            -- OTHERS
            elseif itemText == "OTHERS" then
                CreateButton("Infinite Yield", function()
                    loadstring(game:HttpGet(
                        "https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"
                    ))()
                end)
            end
        end)
    end

    return MainFrame, TitleBar
end

-- INIT UI
local MainFrame, TitleBar = createScriptHubUI()

-- DRAG
local dragging = false
local dragStart, startPos

TitleBar.InputBegan:Connect(function(i)
    if i.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = i.Position
        startPos = MainFrame.Position
        MainFrame.AnchorPoint = Vector2.new(0,0)
    end
end)

UserInputService.InputEnded:Connect(function(i)
    if i.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

UserInputService.InputChanged:Connect(function(i)
    if dragging and i.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = i.Position - dragStart
        MainFrame.Position = UDim2.new(
            0, startPos.X.Offset + delta.X,
            0, startPos.Y.Offset + delta.Y
        )
    end
end)

-- TOGGLE M
local visible = true
UserInputService.InputBegan:Connect(function(i, gp)
    if gp then return end
    if i.KeyCode == Enum.KeyCode.M then
        visible = not visible
        MainFrame.Visible = visible
    end
end)
